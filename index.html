<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Venda de Past√©is</title>

<link rel="manifest" href="manifest.json">

<meta name="theme-color" content="#0a1a2b">

<style>
    body {
        background: #0a1a2b;
        font-family: Arial;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
    }

    .container {
        width: 100%;
        max-width: 430px;
        background: #13294b;
        padding: 20px;
        border-radius: 12px;
        margin-top: 20px;
    }

    h2 {
        text-align: center;
        color: #4da3ff;
        margin-bottom: 15px;
    }

    label {
        display: block;
        margin-top: 12px;
        font-weight: bold;
        font-size: 14px;
        color: white;
    }

    select, input {
        width: 100%;
        padding: 12px;
        border-radius: 8px;
        border: none;
        background: #dfebff;
        margin-top: 5px;
        font-size: 15px;
    }

    button {
        width: 100%;
        padding: 14px;
        background: #4da3ff;
        color: white;
        border: none;
        margin-top: 18px;
        font-size: 17px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: 0.2s;
    }

    /* Anima√ß√£o pulse */
    .pulse {
        animation: pulseAnim 0.4s ease;
    }

    @keyframes pulseAnim {
        0% { transform: scale(1); }
        50% { transform: scale(1.08); }
        100% { transform: scale(1); }
    }

    /* Pop-up de adicionado */
    #popup {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: #2ecc71;
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: bold;
        display: none;
        box-shadow: 0 0 10px black;
        z-index: 9999;
    }

    .item {
        background: #1c3b66;
        padding: 12px;
        border-radius: 10px;
        margin-top: 10px;
        color: white;
    }

    .remove-btn {
        background: #ff4d4d;
        padding: 6px 10px;
        border: none;
        border-radius: 6px;
        margin-top: 8px;
        cursor: pointer;
        color: white;
        font-weight: bold;
    }

    .total-box {
        background: #0f2038;
        padding: 15px;
        border-radius: 10px;
        margin-top: 15px;
        font-size: 18px;
        text-align: center;
        font-weight: bold;
        color: #4da3ff;
    }
</style>

</head>
<body>

<div id="popup">Item adicionado!</div>

<div class="container">

    <h2>Venda de Past√©is</h2>

    <label>Vendedor</label>
    <select id="vendedor">
        <option>Juan</option>
        <option>Jean</option>
        <option>Nathy</option>
    </select>

    <label>Cliente</label>
    <input type="text" id="cliente" placeholder="Nome do cliente">

    <label>Sabor</label>
    <select id="sabor">
        <option>Carne</option>
        <option>Frango</option>
    </select>

    <label>Recheio</label>
    <select id="recheio">
        <option>Requeij√£o</option>
        <option>Cheddar</option>
    </select>

    <label>Qtd. Past√©is (R$ 10,00)</label>
    <select id="qtdPastel">
        <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
        <option>6</option><option>7</option><option>8</option><option>9</option><option>10</option>
    </select>

    <label>Refrigerante (+ R$ 2,00)</label>
    <select id="refri">
        <option value="0">N√£o</option>
        <option value="2">Sim</option>
    </select>

    <button id="btnAdd" onclick="adicionarCarrinho()">Adicionar ao Carrinho</button>

    <h3 style="margin-top:25px; color:#4da3ff;">Carrinho</h3>
    <div id="carrinho"></div>

    <div class="total-box">
        Total: R$ <span id="totalGeral">0.00</span>
    </div>

    <button id="btnEnviar" onclick="enviarGrupo()">Enviar (Total: R$ 0,00)</button>

</div>

<script>
let itens = [];
const grupo = "https://chat.whatsapp.com/C8Vb1Y84j5S8goJxCTcg0Q";

function showPopup() {
    const popup = document.getElementById("popup");
    popup.style.display = "block";

    setTimeout(() => { popup.style.display = "none"; }, 1300);
}

function atualizarTotal() {
    let total = itens.reduce((s, item) => s + item.total, 0);
    document.getElementById("totalGeral").innerText = total.toFixed(2);
    document.getElementById("btnEnviar").innerText = `Enviar (Total: R$ ${total.toFixed(2)})`;
}

function adicionarCarrinho() {
    const sabor = document.getElementById("sabor").value;
    const recheio = document.getElementById("recheio").value;
    const qtdPastel = Number(document.getElementById("qtdPastel").value);
    const refri = Number(document.getElementById("refri").value);

    const total = qtdPastel * 10 + refri;

    itens.push({ sabor, recheio, qtdPastel, refri, total });

    renderizarCarrinho();
    atualizarTotal();

    // ANIMA√á√ÉO
    const btn = document.getElementById("btnAdd");
    btn.classList.add("pulse");
    setTimeout(() => btn.classList.remove("pulse"), 400);

    showPopup();
}

function removerItem(i) {
    itens.splice(i, 1);
    renderizarCarrinho();
    atualizarTotal();
}

function renderizarCarrinho() {
    const box = document.getElementById("carrinho");
    box.innerHTML = "";

    itens.forEach((item, i) => {
        box.innerHTML += `
        <div class="item">
            <strong>${item.sabor} c/ ${item.recheio}</strong><br>
            Past√©is: ${item.qtdPastel} = R$ ${(item.qtdPastel * 10).toFixed(2)}<br>
            Refri: ${item.refri > 0 ? "Sim (R$ 2,00)" : "N√£o"}<br>
            <strong>Total: R$ ${item.total.toFixed(2)}</strong><br>
            <button class="remove-btn" onclick="removerItem(${i})">Remover</button>
        </div>`;
    });
}

function enviarGrupo() {
    const cliente = document.getElementById("cliente").value;
    const vendedor = document.getElementById("vendedor").value;

    if (!cliente) return alert("Digite o nome do cliente!");
    if (itens.length === 0) return alert("Adicione itens ao carrinho!");

    let msg = `üçΩ *Pedido de Past√©is*\nüë§ *Cliente:* ${cliente}\nüßë‚Äçüíº *Vendedor:* ${vendedor}\n\n`;

    itens.forEach((item, i) => {
        msg += `*Item ${i+1}:*\n` +
               `ü•ü ${item.sabor} c/ ${item.recheio}\n` +
               `Past√©is: ${item.qtdPastel}\n` +
               `Refri: ${item.refri > 0 ? "Sim (+ R$ 2,00)" : "N√£o"}\n` +
               `‚û° Total: R$ ${item.total.toFixed(2)}\n\n`;
    });

    const totalFinal = itens.reduce((s, item) => s + item.total, 0);
    msg += `üí∞ *Total Geral: R$ ${totalFinal.toFixed(2)}*`;

    const url = `https://api.whatsapp.com/send?text=${encodeURIComponent(msg)}&link=${encodeURIComponent(grupo)}`;

    window.open(url, "_blank");
}

// === REGISTRA SERVICE WORKER (PWA) ===
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>