<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pastelaria da Nathy</title>

<style>
    body {
        font-family: Arial;
        background: #ffe5f2;
        padding: 20px;
        color: #333;
        max-width: 450px;
        margin: auto;
        font-size: 20px;
    }

    h2 {
        text-align: center;
        color: #d63384;
        font-size: 28px;
    }

    h3 {
        color:#d63384;
        text-align:center;
        font-weight: bold;
    }

    .card {
        background: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 0 10px #ffb6d6;
        margin-top: 20px;
    }

    label {
        font-weight: bold;
        display: block;
        margin-top: 15px;
    }

    input, select, textarea {
        width: 100%;
        padding: 12px;
        border-radius: 10px;
        border: 1px solid #ccc;
        margin-top: 5px;
        font-size: 18px;
    }

    button {
        width: 100%;
        padding: 14px;
        background: #ff4da6;
        border: none;
        color: white;
        border-radius: 12px;
        font-size: 22px;
        margin-top: 15px;
        font-weight: bold;
    }

    .inline {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 10px;
    }

    .qty-btn {
        width: 45px;
        height: 45px;
        font-size: 26px;
        border-radius: 50%;
        border: none;
        background: #ff82c4;
        color: white;
        font-weight: bold;
    }

    .status-btn {
        padding: 12px;
        width: 48%;
        border-radius: 10px;
        border: none;
        font-size: 20px;
        color: white;
        font-weight: bold;
    }

    .pago {
        background: #28a745;
    }

    .pendente {
        background: #dc3545;
    }

    .result, #historicoDia, #fechamento {
        margin-top: 20px;
        font-size: 20px;
        background: white;
        padding: 15px;
        border-radius: 15px;
        box-shadow: 0 0 10px #ffb6d6;
    }

</style>
</head>

<body>

<h3 id="usuarioLogado"></h3>

<!-- LOGIN -->
<div id="login" class="card">
    <h2>Pastelaria da Nathy</h2>

    <label>Usuário</label>
    <select id="usuario">
        <option value="Nathy">Nathy</option>
        <option value="Jean">Jean</option>
        <option value="Juan">Juan</option>
    </select>

    <label>Senha</label>
    <input type="password" id="senha" placeholder="Digite sua senha">

    <button onclick="login()">Entrar</button>
</div>

<!-- APP PRINCIPAL -->
<div id="app" style="display:none;">

<div class="card">
    <label>Data</label>
    <input type="date" id="data">

    <label>Sabor do Pastel</label>
    <select id="sabor">
        <option value="Carne com Cheddar">Carne com Cheddar</option>
        <option value="Frango com Cheddar">Frango com Cheddar</option>
        <option value="Carne com Requeijão">Carne com Requeijão</option>
        <option value="Frango com Requeijão">Frango com Requeijão</option>
    </select>

    <label>Quantidade</label>
    <div class="inline">
        <button class="qty-btn" onclick="alterarQtd(-1)">-</button>
        <div id="qtd" style="font-size:28px; font-weight:bold;">1</div>
        <button class="qty-btn" onclick="alterarQtd(1)">+</button>
    </div>

    <label>Com Refri (R$ 2)</label>
    <select id="refri">
        <option value="0">Não</option>
        <option value="2">Sim</option>
    </select>

    <label>Observação</label>
    <textarea id="obs" rows="2"></textarea>

    <label>Status</label>
    <div class="inline">
        <button class="status-btn pago" onclick="setStatus('Pago')">Pago</button>
        <button class="status-btn pendente" onclick="setStatus('Pendente')">Pendente</button>
    </div>

    <button onclick="registrar()">Registrar Pedido</button>
    <button onclick="mostrarHistorico()">Ver Histórico</button>
    <button onclick="fecharDia()">Fechar Dia</button>
</div>

<div id="resultado"></div>
<div id="historicoDia"></div>
<div id="fechamento"></div>

</div>

<script>
let usuarioAtivo = "";
let statusPedido = "Pendente";

let pedidos = JSON.parse(localStorage.getItem("pedidosNathy") || "[]");
let totaisVendedores = JSON.parse(localStorage.getItem("totaisVendedoresNathy") || `{
    "Nathy": 0,
    "Jean": 0,
    "Juan": 0
}`);

function salvarLocal() {
    localStorage.setItem("pedidosNathy", JSON.stringify(pedidos));
    localStorage.setItem("totaisVendedoresNathy", JSON.stringify(totaisVendedores));
}

function login() {
    const user = document.getElementById("usuario").value;
    const pass = document.getElementById("senha").value;

    if (pass !== "1234") {
        alert("Senha incorreta");
        return;
    }

    usuarioAtivo = user;

    document.getElementById("login").style.display = "none";
    document.getElementById("app").style.display = "block";
    document.getElementById("usuarioLogado").innerText = "Vendedor: " + user;
}

function alterarQtd(n) {
    let qtd = parseInt(document.getElementById("qtd").innerText);
    qtd += n;
    if (qtd < 1) qtd = 1;
    document.getElementById("qtd").innerText = qtd;
}

function setStatus(s) {
    statusPedido = s;
}

function registrar() {
    const data = document.getElementById("data").value;
    const sabor = document.getElementById("sabor").value;
    const qtd = parseInt(document.getElementById("qtd").innerText);
    const refri = parseInt(document.getElementById("refri").value);
    const obs = document.getElementById("obs").value;

    const total = (10 + refri) * qtd;

    totaisVendedores[usuarioAtivo] += total;

    pedidos.push({
        vendedor: usuarioAtivo,
        data,
        sabor,
        qtd,
        refri: refri > 0 ? "Sim" : "Não",
        obs,
        status: statusPedido,
        total
    });

    salvarLocal();

    document.getElementById("resultado").innerHTML = `
        <b>Pedido Registrado:</b><br>
        Vendedor: ${usuarioAtivo}<br>
        Data: ${data}<br>
        Sabor: ${sabor}<br>
        Qtd: ${qtd}<br>
        Refri: ${refri > 0 ? "Sim" : "Não"}<br>
        Obs: ${obs}<br>
        Status: ${statusPedido}<br><br>
        <b>Total: R$ ${total.toFixed(2)}</b>
    `;
}

function mostrarHistorico() {
    let html = "<h3>Histórico de Pedidos</h3>";
    pedidos.forEach(p => {
        html += `
            <div style='margin-bottom:10px;'>
                <b>${p.data}</b> - ${p.sabor} (${p.qtd}) - R$ ${p.total.toFixed(2)}<br>
                Vendedor: ${p.vendedor}<br>
                Refri: ${p.refri} | Status: ${p.status}<br>
            </div>
        `;
    });
    document.getElementById("historicoDia").innerHTML = html;
}

function fecharDia() {
    let totalGeral = 0;
    let totalPago = 0;
    let totalPendente = 0;

    pedidos.forEach(p => {
        totalGeral += p.total;
        if (p.status === "Pago") totalPago += p.total;
        else totalPendente += p.total;
    });

    let html = `
        <h3>Fechamento do Dia</h3>
        Total Geral: R$ ${totalGeral.toFixed(2)}<br>
        Pago: R$ ${totalPago.toFixed(2)}<br>
        Pendente: R$ ${totalPendente.toFixed(2)}<br><br>

        <h3>Total por Vendedor</h3>
        Nathy: R$ ${totaisVendedores["Nathy"].toFixed(2)}<br>
        Jean: R$ ${totaisVendedores["Jean"].toFixed(2)}<br>
        Juan: R$ ${totaisVendedores["Juan"].toFixed(2)}<br>
    `;

    document.getElementById("fechamento").innerHTML = html;
}

</script>

</body>
</html>